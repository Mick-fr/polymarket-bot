<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sniper Ops Center - Polymarket</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            margin: 0;
            padding: 20px;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #1e293b;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .navbar a {
            color: #38bdf8;
            text-decoration: none;
            font-weight: 600;
            margin-left: 15px;
        }

        .radar-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 800px;
            margin: auto;
        }

        .card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .card h3 {
            margin: 0 0 10px 0;
            color: #94a3b8;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .value {
            font-size: 3.5rem;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
        }

        .positive {
            color: #22c55e;
        }

        /* Vert */
        .negative {
            color: #ef4444;
        }

        /* Rouge */
        .neutral {
            color: #f8fafc;
        }

        .status-bar {
            text-align: center;
            margin-top: 40px;
            color: #94a3b8;
            font-size: 0.9rem;
        }
    </style>
</head>

<body>
    <div class="navbar">
        <div>
            <strong style="font-size: 1.2rem;">üéØ SNIPER OPS CENTER</strong>
            <span style="margin-left: 10px; font-size: 0.8rem; color: #94a3b8;">HWM: {{ "%.2f"|format(hwm) }}
                USDC</span>
        </div>
        <div>
            <a href="/market-making">üìä Market Making</a>
            <a href="/copy-trading">üêã Copy-Trading</a>
            <a href="/logout">Logout</a>
        </div>
    </div>
    <div class="radar-container">
        <div class="card">
            <h3>Binance Momentum (30s)</h3>
            <div id="mom-val" class="value neutral">0.000%</div>
            <div style="font-size: 0.8rem; color: #64748b; margin-top: 10px;">Seuil tir : ¬±0.012%</div>
        </div>
        <div class="card">
            <h3>Binance Order Book (OBI)</h3>
            <div id="obi-val" class="value neutral">0.00</div>
            <div style="font-size: 0.8rem; color: #64748b; margin-top: 10px;">Seuil tir : ¬±0.12</div>
        </div>
    </div>
    <div class="status-bar">
        Connect√© au flux Binance WS <span style="color:#22c55e;">‚óè</span> | Mise √† jour : <span
            id="last-update">...</span>
    </div>
    <script>
        function fetchRadar() {
            fetch('/api/sniper-radar')
                .then(response => response.json())
                .then(data => {
                    const momEl = document.getElementById('mom-val');
                    const obiEl = document.getElementById('obi-val');

                    // Update Momentum
                    let momText = (data.momentum_30s > 0 ? '+' : '') + data.momentum_30s.toFixed(3) + '%';
                    momEl.innerText = momText;
                    momEl.className = 'value ' + (data.momentum_30s >= 0.012 ? 'positive' : (data.momentum_30s <= -0.012 ? 'negative' : 'neutral'));
                    // Update OBI
                    let obiText = (data.obi > 0 ? '+' : '') + data.obi.toFixed(2);
                    obiEl.innerText = obiText;
                    obiEl.className = 'value ' + (data.obi >= 0.12 ? 'positive' : (data.obi <= -0.12 ? 'negative' : 'neutral'));
                    // Update Time
                    document.getElementById('last-update').innerText = new Date().toLocaleTimeString();
                })
                .catch(err => console.error("Radar Error:", err));
        }
        // Rafra√Æchissement toutes les 2 secondes
        setInterval(fetchRadar, 2000);
        fetchRadar(); // Appel initial
    </script>
</body>

</html>